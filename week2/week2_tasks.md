# Week 2: Dolev and Yao 任务指南

本周的核心目标是完成协议的初步构思、编写第一个基础版的 AnB 代码，并完成关于 Dolev-Yao 入侵者模型的静态分析特殊任务。

## 1. 编写非正式大纲 (Informal Outline)
* **任务内容**：在不考虑 OFMC 工具和 AnB 语言限制的情况下，尝试使用自然语言或图表来描述你打算如何设计这个协议。
* **核心关注点**：梳理用户 A、服务器 B 和照片打印服务 P 之间的交互逻辑。明确谁发起了请求，谁进行授权，以及数据最终如何流转。

## 2. 编写第一个 AnB 版本 (First AnB Version)
* **任务内容**：在 AnB 中尝试编写协议的第一个版本。
* **允许的简化**：为了降低初始难度，你可以做一些简化，例如假设所有参与者（A, B, P）都拥有公钥。因此，本周暂时不需要引入身份提供商（Identity Provider）。
* **数据建模**：需要思考如何用一种简单的方式在代码中建模出 P 可以访问的 B 上的数据（例如照片）。
* **执行步骤**：编写 `.AnB` 文件（如 `week2_v1.AnB`），并使用 OFMC 工具运行测试。

## 3. 完成本周特殊任务 (Special Task: Static Analysis)
* **任务背景**：假设协议在诚实的代理之间运行，并且入侵者只观察网络流量但不发送消息（纯被动窃听）。
* **分析目标**：根据 Dolev-Yao 模型，说明入侵者能发现什么信息。
* **解答思路**：
    * 列出协议运行中所有在网络上公开传输的消息。
    * 运用 Dolev-Yao 的“分析规则（Analysis Steps）”（如拆解拼接消息、用已知密钥解密等）推导入侵者能提取的知识。
    * 运用“组合规则（Composition）”说明入侵者能用这些知识构造什么。

## 4. 更新实验日志 (Lab Logbook)
* **任务内容**：记录本周协议开发的“快照”。日志必须作为报告的附件提交。
* **记录要点**：
    * 附带当前版本的 AnB 代码和简短描述。
    * 说明本版本的核心想法（与之前相比有什么改变）。
    * 记录建模考量，例如本周所做的简化假设和安全目标。
    * 记录遇到的问题，比如发现了什么攻击（OFMC 的输出）或者无法建模的地方。
    * 记录小组成员的讨论或教师的建议。
